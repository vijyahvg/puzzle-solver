(()=>{const e=new Map,t=t=>{const r=t.map((e=>e.join(","))).join("|");if(e.has(r))return e.get(r);const s=new Set,n=e=>(e=>{const t=Math.min(...e.map((e=>{let[t]=e;return t}))),r=Math.min(...e.map((e=>{let[,t]=e;return t})));return e.map((e=>{let[s,n]=e;return[s-t,n-r]}))})(e).sort(((e,t)=>{let[r,s]=e,[n,o]=t;return r-n||s-o})).map((e=>e.join(","))).join("|");let o=[...t];for(let e=0;e<2;e++){for(let e=0;e<4;e++)s.add(n(o)),o=o.map((e=>{let[t,r]=e;return[-r,t]}));o=o.map((e=>{let[t,r]=e;return[t,-r]}))}const l=Array.from(s).map((e=>e.split("|").map((e=>e.split(",").map(Number)))));return e.set(r,l),l},r=(e,t,r,s)=>{const n=e.length,o=e[0].length;for(const[l,u]of t){const t=r+l,c=s+u;if(t<0||t>=n||c<0||c>=o||""!==e[t][c])return!1}return!0},s=(e,t,r,s,n)=>{const o=e.map((e=>[...e]));return r.forEach((e=>{let[r,l]=e;o[s+r][n+l]=t.symbol})),o};let n=0;const o=function(e,l,u){let c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:50;if(n>=c)return!0;if(0===l.length){const t=e.map((e=>[...e]));return((e,t)=>!t.some((t=>{return r=t,e.every(((e,t)=>e.every(((e,s)=>e===r[t][s]))));var r})))(t,u)&&(u.push(t),n++,self.postMessage({type:"progress",progress:n/c*100,currentSolutions:u.length})),!1}if(!((e,t)=>{const r=(e=>e.reduce(((e,t)=>e+t.filter((e=>""===e)).length),0))(e);return r===t.reduce(((e,t)=>e+t.coords.length),0)})(e,l))return!1;const a=(e=>{for(let t=0;t<e.length;t++)for(let r=0;r<e[0].length;r++)if(""===e[t][r])return[t,r];return null})(e);if(!a)return!1;const[i,f]=a;for(let p=0;p<l.length;p++){const a=l[p],g=t(a.coords);for(const t of g)if(r(e,t,i,f)){const r=s(e,a,t,i,f),g=[...l.slice(0,p),...l.slice(p+1)];if(o(r,g,u,c),n>=c)return!0}}return!1};self.addEventListener("message",(e=>{const{board:t,pieces:r}=e.data;try{const e=((e,t)=>{n=0;const r=t.filter((t=>!e.some((e=>e.includes(t.symbol))))),s=[];return o(e,r,s),s})(t,r);e.length>0?self.postMessage({success:!0,solutions:e,message:`Found ${e.length} solutions!`}):self.postMessage({success:!1,error:"No solutions found!"})}catch(s){self.postMessage({success:!1,error:s.message||"An error occurred while solving the puzzle."})}}))})();
//# sourceMappingURL=625.daaf3965.chunk.js.map